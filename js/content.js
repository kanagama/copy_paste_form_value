var A=(e,i,l)=>{if(!i.has(e))throw TypeError("Cannot "+l)};var r=(e,i,l)=>(A(e,i,"read from private field"),l?l.call(e):i.get(e)),n=(e,i,l)=>{if(i.has(e))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(e):i.set(e,l)},a=(e,i,l,C)=>(A(e,i,"write to private field"),C?C.call(e,l):i.set(e,l),l);(function(){"use strict";var k,g,m,c,p,v,y,f,w,I,F,b,M,x;const e=Object.freeze({CopyPasteCheckboxId:"toggle-checkbox",FlashMessageCheckboxId:"message-checkbox",HiddenCheckboxId:"hidden-checkbox",StatusId:"copy-paste-form-status",FlashMessageId:"copy-paste-form-value-error-message",CopyBtnId:"copy_button_a",PasteBtnId:"paste_button_a",HiddenClass:"copy-paste-form-value-hidden",FlashMessageClass:"copy-paste-form-value-message"});class i{checkFormCount(){return this.getFormCount()==1}element(){return document.getElementsByTagName("form")}getFormCount(){return this.element().length}}class l{constructor(){n(this,k,void 0);a(this,k,new i)}storageName(){return"form_value"}getDisabledName(){return["_method","_csrfToken","_token"]}hasHiddenClass(){return document.getElementById(e.StatusId).classList.contains(e.HiddenClass)}inArray(t){return[].indexOf.call(this.getDisabledName(),t)}serializeArray(){if(!r(this,k).checkFormCount())return{};let t={};return document.querySelector("form").querySelectorAll("input, select, textarea").forEach(s=>{s.getAttribute("type")==="hidden"&&!this.hasHiddenClass()||s.getAttribute("type")==="submit"||s.getAttribute("type")==="reset"||s.getAttribute("type")==="radio"&&s.checked!==!0||(t[s.getAttribute("name")]=s.value)}),JSON.stringify(t)}setForm(t,s){return this.input(t,s)||this.select(t,s)||this.textarea(t,s)}dispatch(t){t.dispatchEvent(new Event("change")),t.dispatchEvent(new Event("change")),setTimeout(()=>{},20)}input(t,s){let o=document.querySelectorAll("input[name="+t+"]");if(o.length<=0)return console.log("input form not found."),!1;if(o.length>1){let d="";return o.forEach(u=>{if(d=u.getAttribute("type"),d!=="checkbox"&&d!=="radio")return!0;if(u.value===s)return u.checked=!0,this.dispatch(u),!1}),!0}return o.forEach(d=>d.getAttribute("type")==="hidden"&&!this.hasHiddenClass()?!0:(this.dispatch(d),!1)),!0}select(t,s){let o=document.querySelector("select[name="+t+"]");return o==null||o.length<=0?!1:(this.dispatch(o),!0)}textarea(t,s){let o=document.querySelector("textarea[name="+t+"]");return o==null||o.length<=0?!1:(o.value=s,this.dispatch(o),!0)}selectorEscape(t){return t.replace(/[ !"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~]/g,"\\$&")}}k=new WeakMap;class C{constructor(){n(this,g,void 0);n(this,m,void 0);a(this,g,new l),a(this,m,new i),this.load(),this.toggle()}key(){return e.CopyBtnId}element(){return document.getElementById(this.key())}load(){this.element()||!r(this,m).checkFormCount()||(document.body.insertAdjacentHTML("beforeend",this.html()),this.element().addEventListener("click",()=>{this.clickEvent()}))}toggle(){chrome.storage.local.get([e.CopyPasteCheckboxId],t=>{this.hide(),t[e.CopyPasteCheckboxId]&&this.show(),console.log("loaded this "+this.key()+".")})}show(){this.element()&&(this.element().style.display="flex")}hide(){this.element()&&(this.element().style.display="none")}html(){return'<a title="Alt + i" id="'+this.key()+`" onMouseOver="this.style.border='solid 2px #3293e7';this.style.color='#3293e7';" onMouseOut="this.style.border='solid 2px #000';this.style.color='#000';" style="display:none;border:solid 2px #000;font-weight:bold;transition: none!important;height: 50px;width: 50px;position: fixed;right: 30px;bottom: 90px;border: solid 2px #000;border-radius: 50%;justify-content: center;align-items: center;z-index: calc(infinity);box-shadow: 0 4px 6px rgb(0 0 0 / 30%);"><div>Copy</div></a>`}clickEvent(){if(!r(this,m).checkFormCount())return console.log("form not exists."),!1;const t={[r(this,g).storageName()]:r(this,g).serializeArray()};return chrome.storage.local.set(t,()=>{console.log("saved this form.")}),!0}}g=new WeakMap,m=new WeakMap;class E{constructor(){n(this,c,void 0);n(this,p,void 0);a(this,c,new l),a(this,p,new i),this.load(),this.toggle()}key(){return e.PasteBtnId}element(){return document.getElementById(this.key())}load(){this.element()||!r(this,p).checkFormCount()||(document.body.insertAdjacentHTML("beforeend",this.html()),this.element().addEventListener("click",()=>{this.clickEvent()}))}toggle(){this.hide(),chrome.storage.local.get([e.CopyPasteCheckboxId],t=>{t[e.CopyPasteCheckboxId]&&this.show(),console.log("loaded this "+this.key()+".")})}show(){this.element()&&(this.element().style.display="flex")}hide(){this.element()&&(this.element().style.display="none")}html(){return`<a title="Alt + o" id="paste_button_a" onMouseOver="this.style.border='solid 2px #3293e7';this.style.color='#3293e7';" onMouseOut="this.style.border='solid 2px #000';this.style.color='#000';" style="display:none;border:solid 2px #000;font-weight:bold;transition: none!important;height: 50px;width: 50px;position: fixed;right: 30px;bottom: 30px;border: solid 2px #000;border-radius: 50%;justify-content: center;align-items: center;z-index: calc(infinity);box-shadow: 0 4px 6px rgb(0 0 0 / 30%);"><div>Paste</div></a>`}clickEvent(){return r(this,p).checkFormCount()?(chrome.storage.local.get([r(this,c).storageName()],t=>{if(!t.hasOwnProperty(r(this,c).storageName()))return console.log("copy data not exists."),!1;let s=JSON.parse(t[r(this,c).storageName()]);Object.keys(s).forEach(o=>{r(this,c).inArray(o)&&r(this,c).setForm(r(this,c).selectorEscape(o),s[o])})}),console.log("loaded this form."),!0):(console.log("form not exists."),!1)}}c=new WeakMap,p=new WeakMap;class B{constructor(){n(this,v,void 0);a(this,v,new i)}key(){return e.FlashMessageId}element(){return document.getElementById(this.key())}load(){this.element()||r(this,v).checkFormCount()||chrome.storage.local.get([e.FlashMessageCheckboxId],t=>{t[e.FlashMessageCheckboxId]&&(document.body.insertAdjacentHTML("beforeend",this.html()),this.hide())})}has(){return this.element()}show(){this.has()||this.load()}hide(){this.element()&&setTimeout(()=>{if(!this.element())return;const t=1e3,s=100;let o=this.element().style.opacity,d=o/(t/s),u=setInterval(()=>{if(!this.element()){clearInterval(u);return}this.element().style.opacity=o,o-=d,o<=0&&(clearInterval(u),this.element().parentNode.removeChild(this.element()))},s)},2e3)}html(){return'<div  id="'+this.key()+'" style=" position: fixed; bottom: 0%; left: 50%; transform: translateX(-50%); z-index: calc(infinity); background-color: #f44336; color: white; padding: 10px 20px; margin: 10px 0; border-radius: 5px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); text-align: center; font-size: 16px; display: flex; opacity: 0.8; font-weight: bold;">Copy Paste Form Value - Error</div>'}}v=new WeakMap;class P{constructor(){n(this,y,void 0);n(this,f,void 0);n(this,w,void 0);a(this,y,new C),a(this,f,new E),a(this,w,new i)}toggle(){return chrome.storage.local.get([e.CopyPasteCheckboxId],t=>{const s=!t[e.CopyPasteCheckboxId];this.hide(),s&&this.show();const o={[e.CopyPasteCheckboxId]:s};chrome.storage.local.set(o,()=>{console.log("saved this "+e.CopyPasteCheckboxId+".")})}),!0}show(){r(this,y).show(),r(this,f).show()}hide(){r(this,y).hide(),r(this,f).hide()}}y=new WeakMap,f=new WeakMap,w=new WeakMap;class H{constructor(){n(this,I,void 0);a(this,I,new i),this.load()}key(){return e.StatusId}element(){return document.getElementById(this.key())}load(){this.element()||(document.body.insertAdjacentHTML("beforeend",this.html()),chrome.storage.local.get([e.HiddenCheckboxId],t=>{t[e.HiddenCheckboxId]&&this.addHidden()}),chrome.storage.local.get([e.FlashMessageCheckboxId],t=>{t[e.FlashMessageCheckboxId]&&this.addMessage()}))}html(){return'<div  id="'+this.key()+'" class="" style=" display: none !important;"></div>'}addHidden(){this.element().classList.add(e.HiddenClass)}removeHidden(){this.element().classList.remove(e.HiddenClass)}addMessage(){this.element().classList.add(e.FlashMessageClass)}removeMessage(){this.element().classList.remove(e.FlashMessageClass)}}I=new WeakMap;class L{constructor(){n(this,F,void 0);n(this,b,void 0);a(this,F,new i),a(this,b,new H)}toggle(){return chrome.storage.local.get([e.HiddenCheckboxId],t=>{const s=!t[e.HiddenCheckboxId];r(this,b).removeHidden(),s&&r(this,b).addHidden();const o={[e.HiddenCheckboxId]:s};chrome.storage.local.set(o,()=>{console.log("saved this "+e.HiddenCheckboxId+".")})}),!0}}F=new WeakMap,b=new WeakMap;class N{constructor(){n(this,M,void 0);n(this,x,void 0);a(this,M,new i),a(this,x,new H)}toggle(){return chrome.storage.local.get([e.FlashMessageCheckboxId],t=>{const s=!t[e.FlashMessageCheckboxId],o={[e.FlashMessageCheckboxId]:s};chrome.storage.local.set(o,()=>{console.log(3),console.log("saved this "+e.FlashMessageCheckboxId+".")}),r(this,x).removeMessage(),s&&r(this,x).addMessage()}),!0}}M=new WeakMap,x=new WeakMap;const S=new i,O=new C,_=new E,j=new B,T=new P,z=new L,q=new N;chrome.runtime.onMessage.addListener(h=>{switch(console.log(h),h){case"hidden":z.toggle();break;case"toggle":T.toggle();break;case"message":q.toggle();break}if(!S.checkFormCount())return console.log("form not exists. onMessage.addListener"),j.show(),!1;switch(h){case"copy":O.clickEvent();break;case"paste":_.clickEvent();break}return!0})})();
