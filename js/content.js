var B=(e,i,l)=>{if(!i.has(e))throw TypeError("Cannot "+l)};var r=(e,i,l)=>(B(e,i,"read from private field"),l?l.call(e):i.get(e)),n=(e,i,l)=>{if(i.has(e))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(e):i.set(e,l)},a=(e,i,l,g)=>(B(e,i,"write to private field"),g?g.call(e,l):i.set(e,l),l);(function(){"use strict";var F,y,M,E,H,p,S,u,b,m,A,x,C,k,v,w;const e=Object.freeze({CopyPasteCheckboxId:"toggle-checkbox",FlashMessageCheckboxId:"message-checkbox",HiddenCheckboxId:"hidden-checkbox",StorageCheckboxId:"storage-checkbox",StatusId:"copy-paste-form-status",FlashMessageId:"copy-paste-form-value-error-message",CopyBtnId:"copy_button_a",PasteBtnId:"paste_button_a",HiddenClass:"copy-paste-form-value-hidden",FlashMessageClass:"copy-paste-form-value-message",StorageClass:"cpy-paste-form-value-storage",StorageName:"storage-checkbox"});class i{checkFormCount(){return this.getFormCount()==1}element(){return document.getElementsByTagName("form")}getFormCount(){return this.element().length}}class l{constructor(){n(this,F,void 0);a(this,F,new i)}getDisabledName(){return["_method","_csrfToken","_token"]}hasHiddenClass(){return document.getElementById(e.StatusId).classList.contains(e.HiddenClass)}inArray(t){return[].indexOf.call(this.getDisabledName(),t)}serializeArray(){if(!r(this,F).checkFormCount())return{};let t={};return document.querySelector("form").querySelectorAll("input, select, textarea").forEach(s=>{s.getAttribute("type")==="hidden"&&!this.hasHiddenClass()||s.getAttribute("type")==="submit"||s.getAttribute("type")==="reset"||s.getAttribute("type")==="radio"&&s.checked!==!0||(t[s.getAttribute("name")]=s.value)}),JSON.stringify(t)}setForm(t,s){return this.input(t,s)||this.select(t,s)||this.textarea(t,s)}dispatch(t){t.dispatchEvent(new Event("change")),t.dispatchEvent(new Event("change")),setTimeout(()=>{},20)}input(t,s){let o=document.querySelectorAll("input[name="+t+"]");if(o.length<=0)return console.log("input form not found."),!1;if(o.length>1){let c="";return o.forEach(d=>{if(c=d.getAttribute("type"),c!=="checkbox"&&c!=="radio")return!0;if(d.value===s)return d.checked=!0,this.dispatch(d),!1}),!0}return o.forEach(c=>c.getAttribute("type")==="hidden"&&!this.hasHiddenClass()?(console.log("The hidden element is not copied."),!0):(c.value=s,this.dispatch(c),!1)),!0}select(t,s){let o=document.querySelector("select[name="+t+"]");return o==null||o.length<=0?(console.log("textarea not found."),!1):(o.value=s,this.dispatch(o),!0)}textarea(t,s){let o=document.querySelector("textarea[name="+t+"]");return o==null||o.length<=0?!1:(o.value=s,this.dispatch(o),!0)}selectorEscape(t){return t.replace(/[ !"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~]/g,"\\$&")}}F=new WeakMap;class g{constructor(){this.load()}key(){return e.StatusId}element(){return document.getElementById(this.key())}load(){this.element()||(document.body.insertAdjacentHTML("beforeend",this.html()),chrome.storage.local.get([e.HiddenCheckboxId],t=>{t[e.HiddenCheckboxId]&&this.addHidden()}),chrome.storage.local.get([e.FlashMessageCheckboxId],t=>{t[e.FlashMessageCheckboxId]&&this.addMessage()}),chrome.storage.local.get([e.StorageCheckboxId],t=>{t[e.StorageCheckboxId]&&this.addStorage()}))}html(){return'<div  id="'+this.key()+'" class="" style=" display: none !important;"></div>'}hasHidden(){return this.element()?!!this.element().classList.contains(e.HiddenClass):!1}addHidden(){if(!this.element())return!1;this.element().classList.add(e.HiddenClass)}removeHidden(){if(!this.element())return!1;this.element().classList.remove(e.HiddenClass)}hasMessage(){return this.element()?!!this.element().classList.contains(e.FlashMessageClass):!1}addMessage(){if(!this.element())return!1;this.element().classList.add(e.FlashMessageClass)}removeMessage(){if(!this.element())return!1;this.element().classList.remove(e.FlashMessageClass)}hasStorage(){return this.element()?!!this.element().classList.contains(e.StorageClass):!1}addStorage(){this.element()&&this.element().classList.add(e.StorageClass)}removeStorage(){this.element()&&this.element().classList.remove(e.StorageClass)}}const f=class f{constructor(){n(this,M,void 0);n(this,E,void 0);if(r(f,y))return r(f,y);a(f,y,this),a(this,M,new g),this.set()}get(){return r(this,M).hasStorage()?r(this,E):"form_value"}set(){const t=location.hostname+location.pathname;a(this,E,t.replace(/\./g,"_"))}};y=new WeakMap,M=new WeakMap,E=new WeakMap,n(f,y,void 0);let I=f;class K{constructor(){n(this,H,void 0);n(this,p,void 0);n(this,S,void 0);a(this,H,new l),a(this,p,new i),a(this,S,new I),this.load(),this.toggle()}key(){return e.CopyBtnId}storageKey(){return e.CopyPasteCheckboxId}element(){return document.getElementById(this.key())}load(){this.element()||!r(this,p).checkFormCount()||(document.body.insertAdjacentHTML("beforeend",this.html()),this.element().addEventListener("click",()=>{this.clickEvent()}))}toggle(){chrome.storage.local.get([this.storageKey()],t=>{this.hide(),t[this.storageKey()]&&this.show(),console.log("loaded this "+this.key()+".")})}show(){this.element()&&(this.element().style.display="flex")}hide(){this.element()&&(this.element().style.display="none")}html(){return'<a title="Alt + i" id="'+this.key()+`" onMouseOver="this.style.border='solid 2px #3293e7';this.style.color='#3293e7';" onMouseOut="this.style.border='solid 2px #000';this.style.color='#000';" style="display:none;border:solid 2px #000;font-weight:bold;transition: none!important;height: 50px;width: 50px;position: fixed;right: 30px;bottom: 90px;border: solid 2px #000;border-radius: 50%;justify-content: center;align-items: center;z-index: calc(infinity);box-shadow: 0 4px 6px rgb(0 0 0 / 30%);"><div>Copy</div></a>`}clickEvent(){if(!r(this,p).checkFormCount())return console.log("form not exists. clickEvent"),!1;const t={[r(this,S).get()]:r(this,H).serializeArray()};return chrome.storage.local.set(t,()=>{console.log("saved this form. clickEvent")}),!0}}H=new WeakMap,p=new WeakMap,S=new WeakMap;class L{constructor(){n(this,u,void 0);n(this,b,void 0);n(this,m,void 0);a(this,u,new l),a(this,b,new i),a(this,m,new I),this.load(),this.toggle()}key(){return e.PasteBtnId}storageKey(){return e.CopyPasteCheckboxId}element(){return document.getElementById(this.key())}load(){this.element()||!r(this,b).checkFormCount()||(document.body.insertAdjacentHTML("beforeend",this.html()),this.element().addEventListener("click",()=>{this.clickEvent()}))}toggle(){this.hide(),chrome.storage.local.get([this.storageKey()],t=>{t[this.storageKey()]&&this.show(),console.log("loaded this "+this.key()+".")})}show(){this.element()&&(this.element().style.display="flex")}hide(){this.element()&&(this.element().style.display="none")}html(){return`<a title="Alt + o" id="paste_button_a" onMouseOver="this.style.border='solid 2px #3293e7';this.style.color='#3293e7';" onMouseOut="this.style.border='solid 2px #000';this.style.color='#000';" style="display:none;border:solid 2px #000;font-weight:bold;transition: none!important;height: 50px;width: 50px;position: fixed;right: 30px;bottom: 30px;border: solid 2px #000;border-radius: 50%;justify-content: center;align-items: center;z-index: calc(infinity);box-shadow: 0 4px 6px rgb(0 0 0 / 30%);"><div>Paste</div></a>`}clickEvent(){return r(this,b).checkFormCount()?(chrome.storage.local.get([r(this,m).get()],t=>{if(!t.hasOwnProperty(r(this,m).get()))return console.log("copy data not exists. clickEvent"),!1;let s=JSON.parse(t[r(this,m).get()]);Object.keys(s).forEach(o=>{r(this,u).inArray(o)&&r(this,u).setForm(r(this,u).selectorEscape(o),s[o])})}),console.log("loaded this form."),!0):(console.log("form not exists. clickEvent"),!1)}}u=new WeakMap,b=new WeakMap,m=new WeakMap;class P{constructor(){n(this,A,void 0);a(this,A,new i)}key(){return e.FlashMessageId}storageKey(){return e.FlashMessageCheckboxId}element(){return document.getElementById(this.key())}load(){this.element()||r(this,A).checkFormCount()||chrome.storage.local.get([this.storageKey()],t=>{t[this.storageKey()]&&(document.body.insertAdjacentHTML("beforeend",this.html()),this.hide())})}has(){return this.element()}show(){this.has()||this.load()}hide(){this.element()&&setTimeout(()=>{if(!this.element())return;const t=1e3,s=100;let o=this.element().style.opacity,c=o/(t/s),d=setInterval(()=>{if(!this.element()){clearInterval(d);return}this.element().style.opacity=o,o-=c,o<=0&&(clearInterval(d),this.element().parentNode.removeChild(this.element()))},s)},2e3)}html(){return'<div  id="'+this.key()+'" style=" position: fixed; bottom: 0%; left: 50%; transform: translateX(-50%); z-index: calc(infinity); background-color: #f44336; color: white; padding: 10px 20px; margin: 10px 0; border-radius: 5px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); text-align: center; font-size: 16px; display: flex; opacity: 0.8; font-weight: bold;">Copy Paste Form Value - Error</div>'}}A=new WeakMap;class T{constructor(){n(this,x,void 0);n(this,C,void 0);a(this,x,new K),a(this,C,new L)}toggle(){return chrome.storage.local.get([e.CopyPasteCheckboxId],t=>{const s=!t[e.CopyPasteCheckboxId];this.hide(),s&&this.show();const o={[e.CopyPasteCheckboxId]:s};chrome.storage.local.set(o,()=>{console.log("saved this "+e.CopyPasteCheckboxId+".")})}),!0}show(){r(this,x).show(),r(this,C).show()}hide(){r(this,x).hide(),r(this,C).hide()}}x=new WeakMap,C=new WeakMap;class O{constructor(){n(this,k,void 0);a(this,k,new g)}toggle(){return chrome.storage.local.get([e.HiddenCheckboxId],t=>{const s=!t[e.HiddenCheckboxId];r(this,k).removeHidden(),s&&r(this,k).addHidden();const o={[e.HiddenCheckboxId]:s};chrome.storage.local.set(o,()=>{console.log("saved this "+e.HiddenCheckboxId+".")})}),!0}}k=new WeakMap;class j{constructor(){n(this,v,void 0);a(this,v,new g)}storageKey(){return e.FlashMessageCheckboxId}toggle(){return chrome.storage.local.get([this.storageKey()],t=>{const s=!t[this.storageKey()],o={[this.storageKey()]:s};chrome.storage.local.set(o,()=>{console.log("saved this "+this.storageKey()+".")}),r(this,v).removeMessage(),s&&r(this,v).addMessage()}),!0}}v=new WeakMap;class z{constructor(){n(this,w,void 0);a(this,w,new g)}storageKey(){return e.StorageCheckboxId}toggle(){return chrome.storage.local.get([this.storageKey()],t=>{const s=!t[this.storageKey()],o={[this.storageKey()]:s};chrome.storage.local.set(o,()=>{console.log("saved this "+this.storageKey()+".")}),r(this,w).removeStorage(),s&&r(this,w).addStorage()}),!0}}w=new WeakMap;const N=new i,_=new K,q=new L,D=new P,J=new T,$=new O,V=new j,X=new z;chrome.runtime.onMessage.addListener(h=>(new I,setTimeout(()=>{switch(console.log(h),h){case"hidden":$.toggle();break;case"toggle":J.toggle();break;case"message":V.toggle();break;case"storage":X.toggle();break}if(!N.checkFormCount())return console.log("form not exists. onMessage.addListener"),D.show(),!1;switch(h){case"copy":_.clickEvent();break;case"paste":q.clickEvent();break}},100),!0))})();
